---
import { Icon } from "astro-icon/components";

interface Props {
    author: string;
    rating: number;
    date: string;
    text: string;
    city?: string;
    service?: string;
}

const { author, rating, date, text, city, service } = Astro.props;
---

<div
    class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 h-full flex flex-col hover:shadow-md transition-shadow"
>
    <div class="flex items-center justify-between mb-4">
        <div class="flex items-center space-x-1">
            {
                Array.from({ length: 5 }).map((_, i) => (
                    <Icon
                        name="heroicons:star-solid"
                        class={`w-5 h-5 ${i < rating ? "text-gold-400" : "text-gray-300"}`}
                    />
                ))
            }
        </div>
        <span class="text-sm text-gray-400">{date}</span>
    </div>

    <p class="text-dark-600 mb-6 flex-grow leading-relaxed">"{text}"</p>

    <div class="mt-auto pt-4 border-t border-gray-50">
        <div class="flex items-center">
            <div
                class="w-10 h-10 bg-gold-100 rounded-full flex items-center justify-center text-gold-700 font-bold text-lg mr-3"
            >
                {author.charAt(0)}
            </div>
            <div>
                <div class="font-bold text-dark-800">{author}</div>
                {city && <div class="text-xs text-gray-500">{city}</div>}
            </div>
        </div>
        {
            service && (
                <div class="mt-3 inline-flex items-center text-xs font-medium text-gold-600 bg-gold-50 px-2 py-1 rounded">
                    <Icon
                        name="heroicons:wrench-screwdriver"
                        class="w-3 h-3 mr-1"
                    />
                    {service}
                </div>
            )
        }
    </div>
</div>
