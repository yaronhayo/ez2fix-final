---
interface FAQ {
    question: string;
    answer: string;
}

import Button from "@components/ui/Button.astro";
import { Icon } from "@components/ui/Icon";

interface Props {
    title?: string;
    subtitle?: string;
    faqs: FAQ[];
    className?: string;
    showCTA?: boolean;
}

const {
    title = "Frequently Asked Questions",
    subtitle = "Get answers to common questions about this service",
    faqs,
    className,
    showCTA = true,
} = Astro.props;
---

<section class={`py-16 bg-white ${className || ""}`}>
    <div class="container mx-auto px-4 max-w-4xl">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-dark-700 mb-4">
                {title}
            </h2>
            <p class="text-lg text-dark-600">
                {subtitle}
            </p>
        </div>

        <div class="space-y-4">
            {
                faqs.map((faq, index) => (
                    <details
                        class="group bg-gradient-to-br from-white to-cream-50 rounded-xl border-2 border-gold-200/30 hover:border-gold-300/50 open:border-gold-400/60 open:bg-white open:shadow-lg transition-all duration-300"
                        open={index === 0}
                    >
                        <summary
                            class="flex items-start gap-4 p-6 cursor-pointer list-none hover:bg-cream-50/50 rounded-xl transition-colors"
                            id={`faq-q-${index}`}
                            aria-controls={`faq-a-${index}`}
                        >
                            <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-gold-400 to-gold-500 rounded-full flex items-center justify-center shadow-md group-hover:scale-110 transition-transform">
                                <Icon
                                    name="helpCircle"
                                    className="w-6 h-6 text-white"
                                />
                            </div>
                            <div class="flex-grow">
                                <h3
                                    class="text-lg font-bold text-dark-800 group-hover:text-gold-600 transition-colors pr-8"
                                    id={`faq-heading-${index}`}
                                >
                                    {faq.question}
                                </h3>
                            </div>
                            <span class="flex-shrink-0 transform transition-transform duration-300 group-open:rotate-180 text-gold-600">
                                <Icon name="chevronDown" className="w-6 h-6" />
                            </span>
                        </summary>
                        <div
                            id={`faq-a-${index}`}
                            role="region"
                            aria-labelledby={`faq-heading-${index}`}
                            class="px-6 pb-6 pl-20 text-dark-600 leading-relaxed border-t border-gold-200/20 pt-6 animate-fadeIn"
                        >
                            <p class="text-base">{faq.answer}</p>
                        </div>
                    </details>
                ))
            }
        </div>

        {
            showCTA && (
                <div class="mt-12 text-center">
                    <Button variant="secondary" size="lg" href="/faq">
                        <Icon name="arrowRight" className="w-5 h-5 mr-2" />
                        View All FAQs
                    </Button>
                </div>
            )
        }
    </div>
</section>
