import{j as e}from"./jsx-runtime-BkYVjofw.js";import{r}from"./index-B7VyPY9C.js";import{I as s}from"./Icon-v_Bk1ipu.js";function a({reviews:a,autoPlayInterval:l=7e3}){const[t,o]=r.useState(0),[n,i]=r.useState(!1),c=r.useRef(null),d=r.useRef(null),u=r.useRef(null),m=r.useCallback(()=>{c.current&&clearTimeout(c.current)},[]),x=r.useCallback(()=>{o(e=>(e+1)%a.length)},[a.length]);r.useEffect(()=>(n||(m(),c.current=setTimeout(x,l)),m),[t,n,l,x,m]);const h=r.useMemo(()=>{const e=[];for(let r=0;r<3;r++)e.push(a[(t+r)%a.length]);return e},[t,a]);return r.useEffect(()=>{u.current&&(u.current.textContent=`Showing review ${t+1} of ${a.length}`)},[t,a.length]),e.jsxs("div",{ref:d,className:"relative max-w-7xl mx-auto",onMouseEnter:()=>i(!0),onMouseLeave:()=>document.activeElement?.closest&&d.current?.contains(document.activeElement)?null:i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),role:"region","aria-roledescription":"carousel","aria-label":"Customer reviews",children:[e.jsx("div",{ref:u,className:"sr-only","aria-live":"polite","aria-atomic":"true"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 transition-all duration-500 ease-in-out",role:"group",children:h.map((r,a)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gold-200/20 h-full flex flex-col p-6 "+(a>0?"hidden md:flex":"flex"),role:"group","aria-roledescription":"slide","aria-label":`Review from ${r.author}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"flex text-gold-400",children:[e.jsxs("span",{className:"sr-only",children:["Rated ",r.rating," out of 5 stars"]}),[...Array(5)].map((r,a)=>e.jsx(s,{name:"star",className:"w-5 h-5 fill-current","aria-hidden":"true"},a))]}),e.jsx("span",{className:"ml-2 text-sm text-dark-500",children:r.relativeTime})]}),e.jsxs("p",{className:"text-dark-700 mb-6 flex-grow italic",children:['"',r.text,'"']}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-dark-900",children:r.author}),e.jsx("div",{className:"text-sm text-dark-600",children:r.city})]}),e.jsx("div",{className:"flex items-center text-xs text-dark-500 bg-cream-100 px-2 py-1 rounded border border-gold-200/20",children:"Google Review"})]})]},r.id))})}),e.jsxs("div",{className:"flex items-center justify-center mt-8 space-x-4",children:[e.jsx("button",{onClick:()=>{o(e=>(e-1+a.length)%a.length)},className:"p-2 rounded-full bg-white shadow-md hover:bg-cream-100 focus:outline-none focus:ring-2 focus:ring-gold-400 border border-transparent","aria-label":"Previous review",children:e.jsx(s,{name:"chevronLeft",className:"w-6 h-6 text-dark-600"})}),e.jsx("div",{className:"flex justify-center space-x-1",children:a.map((r,s)=>e.jsx("button",{onClick:()=>{o(s)},className:"p-3 group focus:outline-none focus:ring-2 focus:ring-gold-400 rounded-full","aria-label":`Go to review ${s+1}`,"aria-current":s===t,children:e.jsx("span",{className:"block w-3 h-3 rounded-full transition-colors duration-300 "+(s===t?"bg-gold-500":"bg-gray-400 group-hover:bg-gold-300")})},s))}),e.jsx("button",{onClick:()=>{x()},className:"p-2 rounded-full bg-white shadow-md hover:bg-cream-100 focus:outline-none focus:ring-2 focus:ring-gold-400 border border-transparent","aria-label":"Next review",children:e.jsx(s,{name:"chevronRight",className:"w-6 h-6 text-dark-600"})}),e.jsx("button",{onClick:()=>{i(e=>!e)},className:"p-2 rounded-full bg-white shadow-md hover:bg-cream-100 focus:outline-none focus:ring-2 focus:ring-gold-400 border border-transparent","aria-label":n?"Play automatic scrolling":"Pause automatic scrolling",children:n?e.jsx(s,{name:"play",className:"w-6 h-6 text-dark-600"}):e.jsx(s,{name:"pause",className:"w-6 h-6 text-dark-600"})})]})]})}export{a as default};
