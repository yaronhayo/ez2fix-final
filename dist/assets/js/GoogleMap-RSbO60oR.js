import { d as createAstro, c as createComponent, a as renderTemplate, k as defineScriptVars, b as addAttribute, m as maybeRenderHead } from "./astro/server-Bk6MH9UW.js";
import "piccolore";
import "clsx";
import { l as locations } from "./Header-xu4VadLQ.js";
var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro("https://ez2fixllc.com");
const $$GoogleMap = createComponent(($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$GoogleMap;
  const {
    locations: locations$1 = locations,
    zoom = 10,
    center = { lat: 40.7357, lng: -74.1724 }
    // Default to Newark
  } = Astro2.props;
  const apiKey = "AIzaSyCC7AYmLnyP7XLdADdhYFpzRRjiCqmlkhw";
  const mapId = `google_map_${Math.random().toString(36).substring(2, 11)}`;
  const mapLocations = locations$1.map((loc) => ({
    title: loc.city,
    position: loc.coordinates,
    url: `/service-areas/${loc.slug}`
  }));
  return renderTemplate(_a || (_a = __template(["", "<div", "", ' class="rounded-xl shadow-lg border border-gray-200 relative group h-[400px] lg:h-[500px]"> <div', ' class="absolute inset-0 flex items-center justify-center bg-gray-100 z-10"> <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gold-500"></div> </div> <div', ' class="hidden absolute inset-0 flex items-center justify-center bg-gray-100 text-red-500 p-4 text-center z-20"></div> </div> <script>(function(){', '\n    // @ts-nocheck\n\n    // Load Google Maps API if not already loaded\n    function loadGoogleMaps() {\n        if (window.google && window.google.maps) {\n            initMap();\n            return;\n        }\n\n        if (document.getElementById("google-maps-script")) {\n            // Script already loading, wait for it\n            const checkGoogle = setInterval(() => {\n                if (window.google && window.google.maps) {\n                    clearInterval(checkGoogle);\n\n                    initMap();\n                }\n            }, 100);\n            return;\n        }\n\n        const script = document.createElement("script");\n        script.id = "google-maps-script";\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap_${mapId}`;\n        script.async = true;\n        script.defer = true;\n\n        script.onerror = (e) => {\n            console.error("[GoogleMap] Failed to load Google Maps script", e);\n            showError(\n                "Failed to load Google Maps API. Please check your network connection.",\n            );\n        };\n\n        // Create a global callback for this specific map instance\n        window[`initMap_${mapId}`] = () => {\n            initMap();\n        };\n\n        document.head.appendChild(script);\n    }\n\n    function showError(message) {\n        const loadingEl = document.getElementById(`${mapId}-loading`);\n        const errorEl = document.getElementById(`${mapId}-error`);\n        if (loadingEl) loadingEl.style.display = "none";\n        if (errorEl) {\n            errorEl.textContent = message;\n            errorEl.classList.remove("hidden");\n        }\n    }\n\n    function initMap() {\n        const mapElement = document.getElementById(mapId);\n        const loadingEl = document.getElementById(`${mapId}-loading`);\n\n        if (!mapElement) {\n            console.error(`[GoogleMap] Map element ${mapId} not found`);\n            return;\n        }\n\n        try {\n            const mapOptions = {\n                zoom: zoom,\n                center: center,\n                mapTypeControl: false,\n                streetViewControl: false,\n                fullscreenControl: false,\n                styles: [\n                    {\n                        featureType: "poi",\n                        elementType: "labels",\n                        stylers: [{ visibility: "off" }],\n                    },\n                ],\n            };\n\n            const map = new google.maps.Map(mapElement, mapOptions);\n\n            const bounds = new google.maps.LatLngBounds();\n            const infoWindow = new google.maps.InfoWindow();\n\n            // Custom SVG marker for better visibility on satellite map\n            // Gold fill with white stroke for high contrast\n            const icon = {\n                path: "M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",\n                fillColor: "#D4AF37", // Brand Gold\n                fillOpacity: 1,\n                strokeWeight: 2,\n                strokeColor: "#FFFFFF", // White stroke for contrast\n                scale: 2,\n                anchor: new google.maps.Point(12, 22),\n                labelOrigin: new google.maps.Point(12, -10),\n            };\n\n            let markersCreated = 0;\n            mapLocations.forEach((location) => {\n                if (!location.position) return;\n\n                const marker = new google.maps.Marker({\n                    position: location.position,\n                    map: map,\n                    title: location.title,\n                    icon: icon,\n                    animation: google.maps.Animation.DROP,\n                });\n\n                // Extend bounds to include this marker\n                bounds.extend(location.position);\n\n                // Add click listener\n                marker.addListener("click", () => {\n                    const content = `\n                        <div style="padding: 8px; text-align: center;">\n                            <h3 style="font-weight: bold; margin-bottom: 4px; color: #1a1a1a;">${location.title}</h3>\n                            <a href="${location.url}" style="color: #d4af37; text-decoration: none; font-weight: bold;">View Service Area</a>\n                        </div>\n                    `;\n                    infoWindow.setContent(content);\n                    infoWindow.open(map, marker);\n                });\n                markersCreated++;\n            });\n\n            // Fit bounds if there are multiple locations\n            if (mapLocations.length > 1) {\n                map.fitBounds(bounds);\n                // Add a little padding\n                const listener = google.maps.event.addListener(\n                    map,\n                    "idle",\n                    () => {\n                        if (map.getZoom() > 14) map.setZoom(14);\n                        google.maps.event.removeListener(listener);\n                    },\n                );\n            } else if (mapLocations.length === 1) {\n                map.setCenter(mapLocations[0].position);\n                map.setZoom(13);\n            }\n\n            // Hide loading spinner\n            if (loadingEl) loadingEl.style.display = "none";\n        } catch (error) {\n            console.error("[GoogleMap] Error initializing map:", error);\n            showError("An error occurred while initializing the map.");\n        }\n    }\n\n    // Start loading with IntersectionObserver\n    if (apiKey) {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach((entry) => {\n                    if (entry.isIntersecting) {\n                        loadGoogleMaps();\n                        observer.disconnect();\n                    }\n                });\n            },\n            {\n                rootMargin: "200px", // Load when map is 200px away from viewport\n            },\n        );\n\n        const mapElement = document.getElementById(mapId);\n        if (mapElement) {\n            observer.observe(mapElement);\n        }\n    } else {\n        console.error("[GoogleMap] Google Maps API Key is missing");\n        showError("Map configuration missing (API Key)");\n    }\n})();<\/script>'], ["", "<div", "", ' class="rounded-xl shadow-lg border border-gray-200 relative group h-[400px] lg:h-[500px]"> <div', ' class="absolute inset-0 flex items-center justify-center bg-gray-100 z-10"> <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gold-500"></div> </div> <div', ' class="hidden absolute inset-0 flex items-center justify-center bg-gray-100 text-red-500 p-4 text-center z-20"></div> </div> <script>(function(){', '\n    // @ts-nocheck\n\n    // Load Google Maps API if not already loaded\n    function loadGoogleMaps() {\n        if (window.google && window.google.maps) {\n            initMap();\n            return;\n        }\n\n        if (document.getElementById("google-maps-script")) {\n            // Script already loading, wait for it\n            const checkGoogle = setInterval(() => {\n                if (window.google && window.google.maps) {\n                    clearInterval(checkGoogle);\n\n                    initMap();\n                }\n            }, 100);\n            return;\n        }\n\n        const script = document.createElement("script");\n        script.id = "google-maps-script";\n        script.src = \\`https://maps.googleapis.com/maps/api/js?key=\\${apiKey}&callback=initMap_\\${mapId}\\`;\n        script.async = true;\n        script.defer = true;\n\n        script.onerror = (e) => {\n            console.error("[GoogleMap] Failed to load Google Maps script", e);\n            showError(\n                "Failed to load Google Maps API. Please check your network connection.",\n            );\n        };\n\n        // Create a global callback for this specific map instance\n        window[\\`initMap_\\${mapId}\\`] = () => {\n            initMap();\n        };\n\n        document.head.appendChild(script);\n    }\n\n    function showError(message) {\n        const loadingEl = document.getElementById(\\`\\${mapId}-loading\\`);\n        const errorEl = document.getElementById(\\`\\${mapId}-error\\`);\n        if (loadingEl) loadingEl.style.display = "none";\n        if (errorEl) {\n            errorEl.textContent = message;\n            errorEl.classList.remove("hidden");\n        }\n    }\n\n    function initMap() {\n        const mapElement = document.getElementById(mapId);\n        const loadingEl = document.getElementById(\\`\\${mapId}-loading\\`);\n\n        if (!mapElement) {\n            console.error(\\`[GoogleMap] Map element \\${mapId} not found\\`);\n            return;\n        }\n\n        try {\n            const mapOptions = {\n                zoom: zoom,\n                center: center,\n                mapTypeControl: false,\n                streetViewControl: false,\n                fullscreenControl: false,\n                styles: [\n                    {\n                        featureType: "poi",\n                        elementType: "labels",\n                        stylers: [{ visibility: "off" }],\n                    },\n                ],\n            };\n\n            const map = new google.maps.Map(mapElement, mapOptions);\n\n            const bounds = new google.maps.LatLngBounds();\n            const infoWindow = new google.maps.InfoWindow();\n\n            // Custom SVG marker for better visibility on satellite map\n            // Gold fill with white stroke for high contrast\n            const icon = {\n                path: "M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",\n                fillColor: "#D4AF37", // Brand Gold\n                fillOpacity: 1,\n                strokeWeight: 2,\n                strokeColor: "#FFFFFF", // White stroke for contrast\n                scale: 2,\n                anchor: new google.maps.Point(12, 22),\n                labelOrigin: new google.maps.Point(12, -10),\n            };\n\n            let markersCreated = 0;\n            mapLocations.forEach((location) => {\n                if (!location.position) return;\n\n                const marker = new google.maps.Marker({\n                    position: location.position,\n                    map: map,\n                    title: location.title,\n                    icon: icon,\n                    animation: google.maps.Animation.DROP,\n                });\n\n                // Extend bounds to include this marker\n                bounds.extend(location.position);\n\n                // Add click listener\n                marker.addListener("click", () => {\n                    const content = \\`\n                        <div style="padding: 8px; text-align: center;">\n                            <h3 style="font-weight: bold; margin-bottom: 4px; color: #1a1a1a;">\\${location.title}</h3>\n                            <a href="\\${location.url}" style="color: #d4af37; text-decoration: none; font-weight: bold;">View Service Area</a>\n                        </div>\n                    \\`;\n                    infoWindow.setContent(content);\n                    infoWindow.open(map, marker);\n                });\n                markersCreated++;\n            });\n\n            // Fit bounds if there are multiple locations\n            if (mapLocations.length > 1) {\n                map.fitBounds(bounds);\n                // Add a little padding\n                const listener = google.maps.event.addListener(\n                    map,\n                    "idle",\n                    () => {\n                        if (map.getZoom() > 14) map.setZoom(14);\n                        google.maps.event.removeListener(listener);\n                    },\n                );\n            } else if (mapLocations.length === 1) {\n                map.setCenter(mapLocations[0].position);\n                map.setZoom(13);\n            }\n\n            // Hide loading spinner\n            if (loadingEl) loadingEl.style.display = "none";\n        } catch (error) {\n            console.error("[GoogleMap] Error initializing map:", error);\n            showError("An error occurred while initializing the map.");\n        }\n    }\n\n    // Start loading with IntersectionObserver\n    if (apiKey) {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach((entry) => {\n                    if (entry.isIntersecting) {\n                        loadGoogleMaps();\n                        observer.disconnect();\n                    }\n                });\n            },\n            {\n                rootMargin: "200px", // Load when map is 200px away from viewport\n            },\n        );\n\n        const mapElement = document.getElementById(mapId);\n        if (mapElement) {\n            observer.observe(mapElement);\n        }\n    } else {\n        console.error("[GoogleMap] Google Maps API Key is missing");\n        showError("Map configuration missing (API Key)");\n    }\n})();<\/script>'])), maybeRenderHead(), addAttribute(mapId, "id"), addAttribute(`width: 100%; background-color: #f0f0f0;`, "style"), addAttribute(`${mapId}-loading`, "id"), addAttribute(`${mapId}-error`, "id"), defineScriptVars({ mapId, apiKey, mapLocations, zoom, center }));
}, "/Users/yaronhayo/Desktop/ez2fix-website/rebuild/src/components/ui/GoogleMap.astro", void 0);
export {
  $$GoogleMap as $
};
